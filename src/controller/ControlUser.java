package controller;import java.io.IOException;import java.sql.Date;import java.util.ArrayList;import java.util.List;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import model.User;import persistence.GenericDAOException;import persistence.userDao.UserDao;@WebServlet({ "/novoUser", "/listarUser", "/editarUser", "/consultarUser" })public class ControlUser extends HttpServlet {	private static final long serialVersionUID = 1L;	public ControlUser() {		super();	}	protected void doGet(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException {		HttpServletRequest req = (HttpServletRequest) request;		if ("/listarUser".equals(req.getServletPath())) {			listar(request, response);		}	}	protected void doPost(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException {		HttpServletRequest req = (HttpServletRequest) request;		if ("/novoUser".equals(req.getServletPath())) {			adicionar(request, response);		} else if ("/editarUser".equals(req.getServletPath())) {			editar(request, response);		}	}	public void adicionar(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException {		User u = new User(request.getParameter("nome"), Date.valueOf(request.getParameter("nascimento")),				request.getParameter("cpf"), request.getParameter("email"), request.getParameter("permissao").charAt(0));		UserDao uDao = new UserDao();		try {			uDao.inserir(u);			response.sendRedirect("./listarUser");		} catch (GenericDAOException e) {			e.printStackTrace();		}	}	private void listar(HttpServletRequest request, HttpServletResponse response) {		List<User> uList = new ArrayList<User>();		if (request.getCookies() != null) {			UserDao dao = new UserDao();			try {				uList = dao.listar(request.getParameter("opcao"));				request.getSession().setAttribute("LIST", uList);				response.sendRedirect("./listarUser.jsp");			} catch (GenericDAOException | IOException e) {				e.printStackTrace();			}		}	}//	private void consultar(HttpServletRequest request, HttpServletResponse response) {//		User u = null;//		UserDao uDao = new UserDao();//		try {//			u = uDao.consultar(request.getParameter("email"));//			request.getSession().setAttribute("EDIT", u);//			response.sendRedirect("./editarUser.jsp");//		} catch (GenericDAOException | IOException e) {//			e.printStackTrace();//		}//	}	private void editar(HttpServletRequest request, HttpServletResponse response) {		User u = new User(Integer.parseInt(request.getParameter("id")), request.getParameter("nome"),				Date.valueOf(request.getParameter("nascimento")), request.getParameter("cpf"),				request.getParameter("email"), request.getParameter("senha"), 				request.getParameter("permissao").charAt(0));		UserDao uDao = new UserDao();		try {			uDao.editar(u);			response.sendRedirect("./listarUser");		} catch (GenericDAOException | IOException e) {			e.printStackTrace();		}	}}